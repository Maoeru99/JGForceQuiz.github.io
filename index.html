<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JG Force Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Orbitron', sans-serif;
  color: #f5f5f5;
  max-width: 600px;
  margin: 0 auto;
  padding: 30px 20px;
  text-align: center;
  background: black;
  overflow-x: hidden;
  -webkit-tap-highlight-color: transparent;
}

#stars {
  position: fixed;
  inset: 0;
  z-index: -1;
}

/* --- Domande --- */
.domanda {
  display: none;
  background: rgba(0,0,0,0.6);
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 15px;
}
.domanda.attiva { display: block; animation: fadeInUp .4s ease; }
.domanda.esci { animation: fadeOutDown .4s ease; }

@keyframes fadeInUp {
  from {opacity:0; transform:translateY(30px);}
  to {opacity:1; transform:none;}
}
@keyframes fadeOutDown {
  from {opacity:1;}
  to {opacity:0; transform:translateY(30px);}
}

/* --- Radio + label --- */
input[type="radio"] {
  display: none;
}

label {
  display: block;
  background: rgba(255,255,255,.05);
  border-radius: 8px;
  padding: 12px;
  margin: 12px 0;
  cursor: pointer;
  transition: .25s;
  user-select: none;
}
label:hover { background: rgba(255,255,255,.15); }

/* SELEZIONE CORRETTA */
input[type="radio"]:checked + label {
  background: rgba(63,140,255,.35);
  box-shadow: 0 0 15px rgba(63,140,255,.8);
  transform: scale(1.02);
}

label:active { transform: scale(.97); }

/* --- Pulsanti --- */
button {
  margin-top: 25px;
  padding: 16px 36px;
  font-size: 18px;
  font-family: 'Orbitron', sans-serif;
  border: none;
  border-radius: 30px;
  color: white;
  cursor: pointer;
  background: linear-gradient(90deg,#3f8cff,#1b3cff);
  box-shadow: 0 0 15px rgba(63,140,255,.6);
}

#progress-container {
  width:100%;
  height:8px;
  background:#222;
  border-radius:4px;
  overflow:hidden;
  margin:20px 0 30px;
}
#progress-bar {
  height:100%;
  width:0%;
  background: linear-gradient(90deg,#3f8cff,#ffe81f,#c62828);
  transition: width .4s;
}

#output {
  margin-top:20px;
  padding:15px;
  border-radius:12px;
  background: rgba(0,0,0,.6);
  white-space: pre-line;
  text-align:left;
}
</style>
</head>

<body>

<canvas id="stars"></canvas>

<h1>Quiz della Forza</h1>
<p style="font-size:12px;opacity:.7">Scopri se sei Jedi, Sith o Jedi Grigio</p>

<div id="progress-container"><div id="progress-bar"></div></div>

<!-- ===== DOMANDE ===== -->

<div class="domanda attiva">
  <h2>Quale frase ti rappresenta di più?</h2>
  <input id="q0a" type="radio" name="q0" value="grigio"><label for="q0a">Questa è la via</label>
  <input id="q0b" type="radio" name="q0" value="sith"><label for="q0b">La Forza mi libererà</label>
  <input id="q0c" type="radio" name="q0" value="jedi"><label for="q0c">Non c'è morte, c'è solo la Forza</label>
</div>

<div class="domanda">
  <h2>Qual è la tua nave preferita?</h2>
  <input id="q1a" type="radio" name="q1" value="sith"><label for="q1a">TIE Fighter</label>
  <input id="q1b" type="radio" name="q1" value="jedi"><label for="q1b">Millennium Falcon</label>
  <input id="q1c" type="radio" name="q1" value="grigio"><label for="q1c">X-Wing</label>
</div>

<div class="domanda">
  <h2>Cosa faresti se qualcuno ti provocasse?</h2>
  <input id="q2a" type="radio" name="q2" value="jedi"><label for="q2a">Rimango calmo</label>
  <input id="q2b" type="radio" name="q2" value="sith"><label for="q2b">Colpisco subito</label>
  <input id="q2c" type="radio" name="q2" value="grigio"><label for="q2c">Dipende</label>
</div>

<div class="domanda">
  <h2>Chi vorresti come maestro?</h2>
  <input id="q3a" type="radio" name="q3" value="jedi"><label for="q3a">Obi-Wan</label>
  <input id="q3b" type="radio" name="q3" value="sith"><label for="q3b">Dooku</label>
  <input id="q3c" type="radio" name="q3" value="grigio"><label for="q3c">Mace Windu</label>
</div>

<button id="next">Avanti</button>
<div id="output"></div>

<script>
let domandaCorrente = 0;
const domande = document.querySelectorAll(".domanda");
const nextBtn = document.getElementById("next");
const progressBar = document.getElementById("progress-bar");

let punteggi = { jedi:0, sith:0, grigio:0 };

function aggiornaProgress() {
  progressBar.style.width = (domandaCorrente / domande.length * 100) + "%";
}

nextBtn.addEventListener("click", () => {
  const selected = document.querySelector(
    `input[name="q${domandaCorrente}"]:checked`
  );
  if (!selected) {
    alert("Seleziona una risposta!");
    return;
  }

  punteggi[selected.value]++;

  domande[domandaCorrente].classList.add("esci");

  setTimeout(() => {
    domande[domandaCorrente].classList.remove("attiva","esci");
    domandaCorrente++;

    if (domandaCorrente < domande.length) {
      domande[domandaCorrente].classList.add("attiva");
    } else {
      mostraRisultato();
    }
    aggiornaProgress();
  }, 400);
});

function mostraRisultato() {
  const output = document.getElementById("output");
  output.innerText =
    `Jedi: ${punteggi.jedi}\n` +
    `Sith: ${punteggi.sith}\n` +
    `Grigio: ${punteggi.grigio}`;
  nextBtn.style.display = "none";
  progressBar.style.width = "100%";
}

/* --- Stelle --- */
const canvas = document.getElementById("stars");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

const stars = Array.from({length:150}, () => ({
  x:Math.random()*canvas.width,
  y:Math.random()*canvas.height,
  r:Math.random()*1.5+0.5
}));

function animateStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  stars.forEach(s=>{
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fillStyle="white";
    ctx.fill();
  });
  requestAnimationFrame(animateStars);
}
animateStars();
</script>

</body>
</html>
