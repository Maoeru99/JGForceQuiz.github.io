<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">
  <title>Quiz della Forza</title>
  <style>
    body {
  font-family: 'Orbitron', sans-serif;
  background: black;
  color: #f5f5f5;
  max-width: 600px;
  margin: 0 auto;
  padding: 30px 20px;
  text-align: center;
  overflow-x: hidden;
  position: relative;
}

/* layer di stelle */
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: transparent;
  box-shadow:
    10vw 20vh white,
    50vw 30vh white,
    70vw 80vh white,
    20vw 70vh white,
    90vw 10vh white,
    40vw 40vh white,
    60vw 60vh white,
    30vw 20vh white,
    80vw 50vh white,
    15vw 85vh white;
  animation: stars 10s linear infinite;
  z-index: -1;
}

@keyframes stars {
  0% { transform: translateY(0) translateX(0); }
  50% { transform: translateY(-2px) translateX(1px); }
  100% { transform: translateY(0) translateX(0); }
}

h1 {
  color: #ffe81f;
  letter-spacing: 2px;
  margin-bottom: 10px;
}

h2 {
  margin-top: 0;
}

p {
  color: #ddd;
  line-height: 1.5;
}

label {
  display: block;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 8px;
  padding: 12px;
  margin: 12px 0;
  cursor: pointer;
  transition: all 0.3s ease;
}

label:hover {
  background: rgba(255,255,255,0.12);
}

input[type="radio"] {
  accent-color: #ffe81f;
  margin-right: 10px;
}

button {
  margin-top: 25px;
  padding: 12px 30px;
  font-size: 16px;
  font-family: 'Orbitron', sans-serif;
  background: linear-gradient(90deg, #3f8cff, #1b3cff);
  border: none;
  border-radius: 30px;
  color: white;
  cursor: pointer;
  box-shadow: 0 0 15px rgba(63,140,255,0.6);
  transition: transform 0.2s, box-shadow 0.2s;
}

button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(63,140,255,0.9);
}

/* Sith button variant (se vuoi usarla) */
button.sith {
  background: linear-gradient(90deg, #c62828, #8e0000);
  box-shadow: 0 0 15px rgba(198,40,40,0.7);
}

/* DOMANDE */
.domanda {
  display: none;
  animation: fadeIn 0.5s ease;
}

.domanda.attiva {
  display: block;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* BARRA DI PROGRESSO */
#progress-container {
  width: 100%;
  height: 8px;
  background: #222;
  border-radius: 4px;
  overflow: hidden;
  margin: 20px 0 30px;
}

#progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(
    90deg,
    #3f8cff,
    #ffe81f,
    #c62828
  );
  transition: width 0.4s ease;
}

/* RISULTATO */
#output {
  white-space: pre-line;
  margin-top: 20px;
  font-size: 15px;
}
  </style>
</head>
<body>

<h1>ðŸ”® Quiz della Forza</h1>
  <p style="font-size:12px; opacity:0.7; letter-spacing:1px;">
  Un test per determinare il tuo destino nella Forza
</p>

<div id="progress-container">
  <div id="progress-bar"></div>
</div>

<!-- DOMANDA 1 -->
<div class="domanda attiva">
  <h2>Domanda 1</h2>
  <p>In una situazione di pericolo tuâ€¦</p>

  <label>
    <input type="radio" name="q1" data-jedi="2" data-sith="0" data-grigio="1">
    Mantieni la calma e proteggi gli altri
  </label>
  <label>
    <input type="radio" name="q1" data-jedi="0" data-sith="2" data-grigio="0">
    Usi la rabbia per vincere
  </label>
  <label>
    <input type="radio" name="q1" data-jedi="1" data-sith="1" data-grigio="2">
    Agisci senza seguire regole rigide
  </label>

  <button onclick="avanti(1)">Avanti</button>
</div>

<!-- DOMANDA 2 -->
<div class="domanda">
  <h2>Domanda 2</h2>
  <p>Cosâ€™Ã¨ il potere per te?</p>

  <label>
    <input type="radio" name="q2" data-jedi="2" data-sith="0" data-grigio="1">
    Uno strumento per mantenere lâ€™equilibrio
  </label>
  <label>
    <input type="radio" name="q2" data-jedi="0" data-sith="2" data-grigio="0">
    Un mezzo per dominare
  </label>
  <label>
    <input type="radio" name="q2" data-jedi="1" data-sith="1" data-grigio="2">
    Qualcosa da usare con cautela
  </label>

  <button onclick="avanti(2)">Scopri il risultato</button>
</div>

<!-- RISULTATO -->
<div class="domanda" id="risultato">
  <h2>âœ¨ Il tuo destino nella Forza</h2>
  <p id="output"></p>
</div>

<script>
const domande = document.querySelectorAll(".domanda");
const totaleDomande = domande.length - 1;
const progressBar = document.getElementById("progress-bar");

let punteggi = JSON.parse(localStorage.getItem("punteggi")) || {
  jedi: 0,
  sith: 0,
  grigio: 0
};

let domandaCorrente = parseInt(localStorage.getItem("domandaCorrente")) || 0;

function aggiornaProgress() {
  const percentuale = (domandaCorrente / totaleDomande) * 100;
  progressBar.style.width = percentuale + "%";
}

function avanti(numeroDomanda) {
  const risposta = document.querySelector(`input[name="q${numeroDomanda}"]:checked`);
  if (!risposta) {
    alert("Seleziona una risposta!");
    return;
  }

  punteggi.jedi += parseInt(risposta.dataset.jedi);
  punteggi.sith += parseInt(risposta.dataset.sith);
  punteggi.grigio += parseInt(risposta.dataset.grigio);

  localStorage.setItem("punteggi", JSON.stringify(punteggi));

  domande[domandaCorrente].classList.remove("attiva");
  domandaCorrente++;
  localStorage.setItem("domandaCorrente", domandaCorrente);
  domande[domandaCorrente].classList.add("attiva");

  aggiornaProgress();

  if (domandaCorrente === totaleDomande) {
    mostraRisultato();
  }
}

function mostraRisultato() {
  const output = document.getElementById("output");
  let esito = "âš–ï¸ Jedi Grigio â€“ cammini tra luce e oscuritÃ ";
  let colore = "#a080ff"; // viola per Jedi Grigio
  let shadow = "0 0 20px #a080ff";

  if (punteggi.jedi > punteggi.sith && punteggi.jedi > punteggi.grigio) {
    esito = "ðŸŸ¦ Jedi â€“ segui la luce e lâ€™equilibrio della Forza";
    colore = "#3f8cff"; 
    shadow = "0 0 25px #3f8cff";
  } else if (punteggi.sith > punteggi.jedi && punteggi.sith > punteggi.grigio) {
    esito = "ðŸŸ¥ Sith â€“ la passione e il potere guidano le tue scelte";
    colore = "#c62828";
    shadow = "0 0 25px #c62828";
  }

  output.innerText = `
Punteggi finali:
Jedi: ${punteggi.jedi}
Sith: ${punteggi.sith}
Jedi Grigio: ${punteggi.grigio}

${esito}
`;

  output.style.color = colore;
  output.style.textShadow = shadow;
}


// RIPRISTINO STATO ALLâ€™AVVIO
domande.forEach(d => d.classList.remove("attiva"));
domande[domandaCorrente].classList.add("attiva");
aggiornaProgress();

// BLOCCO REFRESH ACCIDENTALE
window.addEventListener("beforeunload", function (e) {
  e.preventDefault();
  e.returnValue = "";
});
</script>



</body>
</html>
